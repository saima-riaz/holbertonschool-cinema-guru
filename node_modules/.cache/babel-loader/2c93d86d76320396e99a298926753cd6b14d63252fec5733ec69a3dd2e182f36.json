{"ast":null,"code":"var _jsxFileName = \"/Users/saima/Desktop/Full stack spe/holbertonschool-cinema-guru/src/components/movies/MovieCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./movies.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar, faClock } from \"@fortawesome/free-solid-svg-icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MovieCard = ({\n  movie\n}) => {\n  _s();\n  var _movie$imageurls;\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [isWatchLater, setIsWatchLater] = useState(false);\n  const fallbackImage = \"https://streaming1.cigre.org/view/img/notfound_portrait.jpg\";\n  const imageUrl = ((_movie$imageurls = movie.imageurls) === null || _movie$imageurls === void 0 ? void 0 : _movie$imageurls.length) > 0 ? movie.imageurls[0] : fallbackImage;\n  useEffect(() => {\n    const fetchMovieStatus = async () => {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) return;\n      try {\n        const [favRes, watchRes] = await Promise.all([axios.get(\"http://localhost:8000/api/titles/favorite/\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(\"http://localhost:8000/api/titles/watchlater/\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n        setIsFavorite(favRes.data.some(favMovie => favMovie.imdbId === movie.imdbId));\n        setIsWatchLater(watchRes.data.some(watchMovie => watchMovie.imdbId === movie.imdbId));\n      } catch (error) {\n        console.error(\"Error fetching movie status:\", error);\n      }\n    };\n    fetchMovieStatus();\n  }, [movie]);\n  const handleClick = async type => {\n    const token = localStorage.getItem(\"accessToken\");\n    if (!token) return;\n    const url = `http://localhost:8000/api/titles/${type}/${movie.imdbId}`;\n    const toggleState = type === \"favorite\" ? setIsFavorite : setIsWatchLater;\n    const stateValue = type === \"favorite\" ? isFavorite : isWatchLater;\n    try {\n      if (stateValue) {\n        await axios.delete(url, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n      } else {\n        await axios.post(url, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n      }\n      toggleState(!stateValue);\n    } catch (error) {\n      console.error(`Error updating ${type}:`, error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movie-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movie-image\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageUrl,\n        alt: movie.title,\n        onError: e => e.target.src = fallbackImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"movie-title-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"movie-title\",\n          children: movie.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"movie-icons\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faClock,\n          className: `icon ${isWatchLater ? \"active\" : \"\"}`,\n          onClick: () => handleClick(\"watchlater\"),\n          \"aria-label\": \"Add to watch later\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faStar,\n          className: `icon ${isFavorite ? \"active\" : \"\"}`,\n          onClick: () => handleClick(\"favorite\"),\n          \"aria-label\": \"Add to favorites\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movie-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"movie-synopsis\",\n        children: movie.synopsis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"movie-genres\",\n        children: movie.genres.map((genre, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"genre-tag\",\n          children: genre\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n_s(MovieCard, \"/cctvb+Lz0YwDGS6uFWIeqomgOU=\");\n_c = MovieCard;\nexport default MovieCard;\nvar _c;\n$RefreshReg$(_c, \"MovieCard\");","map":{"version":3,"names":["React","useState","useEffect","axios","FontAwesomeIcon","faStar","faClock","jsxDEV","_jsxDEV","MovieCard","movie","_s","_movie$imageurls","isFavorite","setIsFavorite","isWatchLater","setIsWatchLater","fallbackImage","imageUrl","imageurls","length","fetchMovieStatus","token","localStorage","getItem","favRes","watchRes","Promise","all","get","headers","Authorization","data","some","favMovie","imdbId","watchMovie","error","console","handleClick","type","url","toggleState","stateValue","delete","post","className","children","src","alt","title","onError","e","target","fileName","_jsxFileName","lineNumber","columnNumber","icon","onClick","synopsis","genres","map","genre","index","_c","$RefreshReg$"],"sources":["/Users/saima/Desktop/Full stack spe/holbertonschool-cinema-guru/src/components/movies/MovieCard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./movies.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar, faClock } from \"@fortawesome/free-solid-svg-icons\";\n\nconst MovieCard = ({ movie }) => {\n    const [isFavorite, setIsFavorite] = useState(false);\n    const [isWatchLater, setIsWatchLater] = useState(false);\n    const fallbackImage = \"https://streaming1.cigre.org/view/img/notfound_portrait.jpg\";\n\n    const imageUrl = movie.imageurls?.length > 0 ? movie.imageurls[0] : fallbackImage;\n\n    useEffect(() => {\n        const fetchMovieStatus = async () => {\n            const token = localStorage.getItem(\"accessToken\");\n            if (!token) return;\n\n            try {\n                const [favRes, watchRes] = await Promise.all([\n                    axios.get(\"http://localhost:8000/api/titles/favorite/\", {\n                        headers: { Authorization: `Bearer ${token}` },\n                    }),\n                    axios.get(\"http://localhost:8000/api/titles/watchlater/\", {\n                        headers: { Authorization: `Bearer ${token}` },\n                    })\n                ]);\n\n                setIsFavorite(favRes.data.some(favMovie => favMovie.imdbId === movie.imdbId));\n                setIsWatchLater(watchRes.data.some(watchMovie => watchMovie.imdbId === movie.imdbId));\n            } catch (error) {\n                console.error(\"Error fetching movie status:\", error);\n            }\n        };\n\n        fetchMovieStatus();\n    }, [movie]);\n\n    const handleClick = async (type) => {\n        const token = localStorage.getItem(\"accessToken\");\n        if (!token) return;\n\n        const url = `http://localhost:8000/api/titles/${type}/${movie.imdbId}`;\n        const toggleState = type === \"favorite\" ? setIsFavorite : setIsWatchLater;\n        const stateValue = type === \"favorite\" ? isFavorite : isWatchLater;\n\n        try {\n            if (stateValue) {\n                await axios.delete(url, { headers: { Authorization: `Bearer ${token}` } });\n            } else {\n                await axios.post(url, {}, { headers: { Authorization: `Bearer ${token}` } });\n            }\n            toggleState(!stateValue);\n        } catch (error) {\n            console.error(`Error updating ${type}:`, error);\n        }\n    };\n\n    return (\n        <div className=\"movie-card\">\n            <div className=\"movie-image\">\n                <img\n                    src={imageUrl}\n                    alt={movie.title}\n                    onError={(e) => (e.target.src = fallbackImage)}\n                />\n                <div className=\"movie-title-overlay\">\n                    <p className=\"movie-title\">{movie.title}</p>\n                </div>\n                <div className=\"movie-icons\">\n                    <FontAwesomeIcon\n                        icon={faClock}\n                        className={`icon ${isWatchLater ? \"active\" : \"\"}`}\n                        onClick={() => handleClick(\"watchlater\")}\n                        aria-label=\"Add to watch later\"\n                    />\n                    <FontAwesomeIcon\n                        icon={faStar}\n                        className={`icon ${isFavorite ? \"active\" : \"\"}`}\n                        onClick={() => handleClick(\"favorite\")}\n                        aria-label=\"Add to favorites\"\n                    />\n                </div>\n            </div>\n            <div className=\"movie-details\">\n                <p className=\"movie-synopsis\">{movie.synopsis}</p>\n                <div className=\"movie-genres\">\n                    {movie.genres.map((genre, index) => (\n                        <span key={index} className=\"genre-tag\">{genre}</span>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MovieCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}